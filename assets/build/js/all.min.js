var corsUrl="https://cors-anywhere.herokuapp.com/",zipCodeAPIKey="SdSpE1BrLTecgk9cVoCbLdRc196q6JJCva4RnIUxVExHzUeo3zmuk0A9BvnFtonH",darkSkyAPIKey="7da5188b1388de4b208e12193b0a4f52",newsapiOrgKey="d80b93ed851e468eaaa4974611ad2d94",bookmarks=[{name:"Reddit",url:"https://reddit.com"},{name:"Google",url:"https://google.com"},{name:"GitHub",url:"https://github.com"},{name:"YouTube",url:"https://youtube.com"},{name:"Google Photos",url:"https://photos.google.com"},{name:"Google News",url:"https://news.google.com"}];function setCookie(e,t,a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r="expires="+n.toGMTString();document.cookie=e+"="+t+";"+r+";path=/"}function getCookie(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var r=a[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}function checkCookie(){var e=getCookie("zipcode");""!=e?console.log("Zipcode: "+e):""!=(e=prompt("Please enter your Zipcode:",""))&&null!=e&&setCookie("zipcode",e,30),getCityNameFromZipCode(e)}function startTime(){var e=new Date,t=e.getHours(),a=e.getMinutes();t=e.getHours()%12||12,a=checkTime(a),document.getElementById("txt").innerHTML=t+":"+a;setTimeout(startTime,500)}function checkTime(e){return e<10?e="0"+e:e}function getDayOfTheWeek(e){var t=new Array(7);return t[0]="Sunday",t[1]="Monday",t[2]="Tuesday",t[3]="Wednesday",t[4]="Thursday",t[5]="Friday",t[6]="Saturday",t[e.getDay()]}function getMonthOfTheYear(e){var t=new Array;return t[0]="January",t[1]="February",t[2]="March",t[3]="April",t[4]="May",t[5]="June",t[6]="July",t[7]="August",t[8]="September",t[9]="October",t[10]="November",t[11]="December",t[e.getMonth()]}function timeSince(e){var t=new Date-e;return t<6e4?Math.round(t/1e3)+" seconds ago":t<36e5?Math.round(t/6e4)+" minutes ago":t<864e5?Math.round(t/36e5)+" hours ago":t<2592e6?"approximately "+Math.round(t/864e5)+" days ago":t<31536e6?"approximately "+Math.round(t/2592e6)+" months ago":"approximately "+Math.round(t/31536e6)+" years ago"}function checkDate(){for(var e=new Date,t=e.getHours(),a=getDayOfTheWeek(e),n=getMonthOfTheYear(e),r=[[0,4,"Good night."],[5,11,"Good morning."],[12,17,"Good afternoon."],[18,22,"Good evening."],[23,24,"Good night."]],o=0;o<r.length;o++)t>=r[o][0]&&t<=r[o][1]&&(document.getElementById("salutation").innerHTML=r[o][2]);document.getElementById("today").innerHTML=a+", "+n+" "+e.getDate()}function getCityNameFromZipCode(e){var t=new Request(corsUrl+"https://www.zipcodeapi.com/rest/"+zipCodeAPIKey+"/info.json/"+e+"/degrees");fetch(t).then(function(e){return e.json()}).then(function(e){populateCityNameFromZipCode(e),getCurrentWeatherCondition(e.lat,e.lng)}).catch(function(e){console.log(e)})}function populateCityNameFromZipCode(e){var t=e.city;console.log("City: "+t),document.getElementById("cityName").innerHTML=t}function getCurrentWeatherCondition(e,t){var a=new Request(corsUrl+"https://api.darksky.net/forecast/"+darkSkyAPIKey+"/"+e+","+t);fetch(a).then(function(e){return e.json()}).then(function(e){populateCurrentWeatherCondition(e.currently),populate5DaysWeatherForecast(e.daily)}).catch(function(e){console.log(e);populateCurrentWeatherCondition([{WeatherText:"Cloudy",Temperature:{Imperial:{Value:30}}}]),populate5DaysWeatherForecast({DailyForecasts:[{Date:"2018/11/24",Temperature:{Maximum:{Value:50},Minimum:{Value:25}}},{Date:"2018/11/25",Temperature:{Maximum:{Value:50},Minimum:{Value:25}}},{Date:"2018/11/26",Temperature:{Maximum:{Value:50},Minimum:{Value:25}}},{Date:"2018/11/27",Temperature:{Maximum:{Value:50},Minimum:{Value:25}}},{Date:"2018/11/28",Temperature:{Maximum:{Value:50},Minimum:{Value:25}}}]})})}function populateCurrentWeatherCondition(e){console.log("Weather summary: "+e.summary);var t=e.summary,a=Math.round(e.temperature),n=document.createElement("div");n.setAttribute("class","col-8");var r=document.createElement("div");r.setAttribute("class","weather-type"),r.innerHTML=t,n.appendChild(r);var o=document.createElement("span");o.setAttribute("class","number"),o.innerHTML=a+'&deg;<span class="unit">F</span>',n.appendChild(o),document.getElementById("currentWeather").appendChild(n);var i=document.createElement("div");i.setAttribute("class","col-4");var s=document.createElement("div");s.setAttribute("class","weather-icon-current"),s.setAttribute("width","84"),s.setAttribute("height","84"),i.appendChild(s);var u=document.createElement("img");u.setAttribute("src","assets/icons/"+e.icon+".svg"),u.setAttribute("title",e.summary),s.appendChild(u),document.getElementById("currentWeather").appendChild(i)}function populate5DaysWeatherForecast(e){for(var t=0;t<5;t++){var a=Math.round(e.data[t].temperatureHigh),n=Math.round(e.data[t].temperatureLow),r=e.data[t].time,o=document.createElement("div");o.setAttribute("class","col");var i=document.createElement("span");i.setAttribute("class","day");var s=new Date(1e3*r),u=new Date,c=getDayOfTheWeek(s),d="";d=s.getDate()===u.getDate()?"Today":c.substring(0,3),i.innerHTML=d,o.appendChild(i);var l=document.createElement("div");l.setAttribute("class","weather-icon-forecast"),l.setAttribute("width","39"),l.setAttribute("height","39"),o.appendChild(l);var m=document.createElement("img");m.setAttribute("src","assets/icons/"+e.data[t].icon+".svg"),m.setAttribute("width","39"),m.setAttribute("height","39"),m.setAttribute("title",e.data[t].summary),l.appendChild(m);var p=document.createElement("div");p.setAttribute("class","high-low");var h=document.createElement("span");h.setAttribute("class","high"),h.innerHTML=a+"&deg;F",p.appendChild(h);var g=document.createElement("br");p.appendChild(g);var y=document.createElement("span");y.setAttribute("class","low"),y.innerHTML=n+"&deg;F",p.appendChild(y),o.appendChild(p),document.getElementById("weatherForecast").appendChild(o)}}function getNews(){var e=new Request("https://newsapi.org/v2/top-headlines?sources=google-news&apiKey="+newsapiOrgKey);fetch(e).then(function(e){return e.json()}).then(function(e){populateNews(e)}).catch(function(e){console.log(e);populateNews({articles:[{source:{name:"CNBC"},title:"Fed holds line on rates, says no more hikes ahead this year - CNBC",url:"https://news.google.com/articles/",publishedAt:"2019-03-20T18:00:08Z"},{source:{name:"Ars Technica"},title:"“Energizing Times”: Microsoft to “go big” at E3 in response to Google Stadia - Ars Technica",url:"https://arstechnica.com/gaming/2019/03/in-wake-of-googles-stadia-reveal-microsofts-phil-spencer-promises-to-go-big-at-e3/",publishedAt:"2019-03-20T17:24:00Z"},{source:{name:"Fox News"},title:"Clarence Thomas makes rare intervention during Supreme Court arguments - Fox News",url:"https://www.foxnews.com/politics/clarence-thomas-makes-rare-intervention-during-supreme-court-arguments",publishedAt:"2019-03-20T17:21:01Z"},{source:{name:"The New York Times"},title:"Confusion, Then Prayer, in Cockpit of Doomed Lion Air Jet - The New York Times",url:"https://www.nytimes.com/2019/03/20/world/asia/lion-air-crash-boeing.html",publishedAt:"2019-03-20T17:10:29Z"}]})})}function populateNews(e){for(var t=0;t<4;t++){var a=document.createElement("li");a.setAttribute("class","card px-4 py-3 mb-2");var n=document.createElement("a");n.setAttribute("href",e.articles[t].url);var r=document.createElement("h5"),o=e.articles[t].title,i=document.createTextNode(o);r.appendChild(i),n.appendChild(r),a.appendChild(n);var s=document.createElement("div");s.setAttribute("class","meta");var u=document.createElement("span");u.setAttribute("class","site"),u.innerHTML=e.articles[t].source.name;var c=document.createElement("time"),d=new Date(e.articles[t].publishedAt);c.innerHTML=timeSince(d),s.appendChild(u),s.appendChild(c),a.appendChild(s),document.getElementById("topHeadlines").appendChild(a)}}function populateFavicons(){for(var e=0;e<bookmarks.length;e++){var t=bookmarks[e].url;t="https://api.faviconkit.com/"+(t=t.replace(/^(https?:|)\/\//,""))+"/64";var a=document.createElement("div");a.setAttribute("class","col");var n=document.createElement("a");n.setAttribute("href",bookmarks[e].url);var r=document.createElement("img");r.setAttribute("src",t),r.setAttribute("title",bookmarks[e].name),r.setAttribute("width","32"),r.setAttribute("height","32"),r.setAttribute("class","mb-3"),n.appendChild(r),a.appendChild(n),document.getElementById("bookmarks").appendChild(a)}}window.onload=function(){checkCookie(),checkDate(),startTime(),getNews(),populateFavicons()};